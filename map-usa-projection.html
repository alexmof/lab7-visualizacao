<!--
	THIS EXAMPLE WAS DOWNLOADED FROM https://echarts.apache.org/examples/en/editor.html?c=map-usa-projection
-->
<!DOCTYPE html>
<html lang="en" style="height: 100%">

<head>
  <meta charset="utf-8">
</head>

<body style="height: 100%; margin: 0">
  <div id="container" style="height: 100%"></div>

  <script type="text/javascript"
    src="https://echarts.apache.org/en/js/vendors/jquery@3.7.1/dist/jquery.min.js"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>

  <!-- Uncomment this line if you want to dataTool extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5/dist/extension/dataTool.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use gl extension
  <script type="text/javascript" src="https://echarts.apache.org/en/js/vendors/echarts-gl/dist/echarts-gl.min.js"></script>
  -->
  <!-- Uncomment this line if you want to echarts-stat extension
  <script type="text/javascript" src="https://echarts.apache.org/en/js/vendors/echarts-stat/dist/ecStat.min.js"></script>
  -->
  <!-- Uncomment this line if you want to echarts-graph-modularity extension
  <script type="text/javascript" src="https://echarts.apache.org/en/js/vendors/echarts-graph-modularity/dist/echarts-graph-modularity.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use map
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/world.js"></script>
  -->
  <!-- Uncomment these two lines if you want to use bmap extension
  <script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=YOUR_API_KEY"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5/dist/extension/bmap.min.js"></script>
  -->

  <script type="text/javascript">
    var dataB = {};
    document.addEventListener('DOMContentLoaded', function () {
      fetch('/BR-exportacoes_importacoes_2025.json')
        .then(response => {
          if (!response.ok) {
            throw new Error('Erro ao carregar o arquivo JSON: ' + response.statusText);
          }
          return response.json(); // Converte a resposta para o formato JSON
        })
        .then(data => {
          console.log(data);
          dataB = data;
        })
        .catch(error => {
          console.error('Houve um problema com a sua operação fetch:', error);
        });
    });
    var dom = document.getElementById('container');
    var myChart = echarts.init(dom, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    var app = {};
    var ROOT_PATH = 'https://echarts.apache.org/examples';
    var option;

    myChart.showLoading();
    myChart.showLoading();

    // ALTERADO: Carregando o arquivo 'world.json' do repositório do ECharts.
    // REMOVIDO: Não precisamos mais carregar as bibliotecas d3-geo, pois não usaremos a projeção customizada.
    $.get('https://cdn.jsdelivr.net/gh/apache/echarts-website@asf-site/examples/data/asset/geo/world.json').done(function (worldJson) {
      myChart.hideLoading();

      // ALTERADO: Registrando o mapa com o nome 'world'
      echarts.registerMap('world', worldJson);

      option = {
        title: {
          // ALTERADO: Título e subtítulo atualizados
          text: 'População Mundial (Exemplo)',
          subtext: 'Dados fictícios para demonstração',
          left: 'center', // Centralizado para melhor visualização
          top: 'top'
        },
        tooltip: {
          trigger: 'item',
          // Formata o tooltip para exibir o nome do país e o valor
          formatter: '{b}: {c}'
        },
        visualMap: {
          left: 'left',
          min: 10000000,
          max: 1500000000,
          inRange: {
            color: [
              '#e0f3f8',
              '#abd9e9',
              '#74add1',
              '#4575b4',
              '#313695'
            ].reverse() // Invertendo as cores para (pouco -> muito)
          },
          text: ['Alta', 'Baixa'],
          calculable: true
        },
        series: [
          {
            // ALTERADO: Nome da série
            name: 'População',
            type: 'map',
            // ALTERADO: Usando o mapa 'world' que registramos
            map: 'world',
            // Centraliza o mapa e ajusta o zoom inicial
            roam: true,
            center: [10, 20],
            zoom: 1.2,
            emphasis: {
              label: {
                show: true
              }
            },
            // REMOVIDO: A projeção 'd3.geoAlbersUsa' foi removida.
            // O ECharts usará uma projeção padrão adequada para o mapa-múndi.

            // ALTERADO: Os dados agora são por país.
            // IMPORTANTE: O 'name' deve corresponder exatamente ao nome do país no arquivo world.json.
            // (Ex: 'United States' em vez de 'USA')
            data: [
              { name: 'China', value: 1400000000 },
              { name: 'India', value: 1350000000 },
              { name: 'United States', value: 330000000 },
              { name: 'Indonesia', value: 270000000 },
              { name: 'Pakistan', value: 220000000 },
              { name: 'Brazil', value: 215000000 },
              { name: 'Nigeria', value: 206000000 },
              { name: 'Bangladesh', value: 165000000 },
              { name: 'Russia', value: 145000000 },
              { name: 'Mexico', value: 128000000 },
              { name: 'Japan', value: 126000000 },
              { name: 'Canada', value: 38000000 },
              { name: 'Australia', value: 25000000 }
            ]
          }
        ]
      };
      myChart.setOption(option);
    });

    if (option && typeof option === 'object') {
      myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
  </script>
</body>

</html>